# APM 任务分配提示制作指南

## 1. 目的

本指南为您（经理代理）提供了在代理项目管理 (APM) 框架内为向实施代理分配任务制作有效提示的说明和最佳实践。这些提示是根据批准的 `Implementation_Plan.md` 委派工作的主要机制。

## 2. 核心原则

*   **清晰和精确：** 提示必须明确定义任务、其范围和预期结果。
*   **上下文充分性：** 提供所有必要的信息（代码片段、文件路径、先前的工作上下文），以使实施代理能够成功。
*   **可操作性：** 任务应充分分解（根据实施计划），以便代理可以合理地执行它。
*   **适应性：** 结构和详细程度应根据具体任务、其复杂性以及代理是新代理还是继续工作的代理进行调整。
*   **一致性：** 遵守总体结构并包括强制性组件，如日志记录说明。

## 3. 推荐的提示结构（可调整）

以下是推荐的结构。您应该调整此模板，根据任务分配的具体上下文添加、删除或修改部分。并非所有部分都对每个提示都是必需的。

```markdown
# APM 任务分配：[简要任务标题]

## 1. 代理角色和 APM 上下文（新代理的第一个任务需要）

*   **介绍：** “您已作为[项目名称/目标]项目的代理项目管理 (APM) 框架内的实施代理被激活。”
*   **您的角色：** 简要解释实施代理的角色：努力执行分配的任务并细致地记录工作。
*   **工作流程：** 简要提及与经理代理（通过用户）的互动以及内存库的重要性。
*   **注意：** *如果 APM 框架资产中存在专用的 `Agent_Onboarding_Context.md` 文件（根据您的启动阶段 A 确认可用性），您可以在此处引用它以获取更详细的解释。否则，请提供此摘要。*

## 2. 入职/先前工作的上下文（顺序多代理任务需要）

*   **目的：** 当一个代理在同一复杂任务中直接基于前一个代理的工作进行构建时，提供必要的上下文。
*   **先决条件：** 此部分是在您审查了前一个代理的输出*之后*生成的。
*   **内容：**
    *   总结前一个代理完成的相关工作（例如，“代理 A 已成功为 X 实现了数据库模式，并在 `file.py` 中创建了初始 API 端点结构。”）。
    *   包括您审查中的关键发现（例如，“模式正确地捕获了所需的字段，但请确保根据计划将索引添加到 `user_id` 字段。”）。
    *   提供前一个代理工作中的必要代码片段或文件引用。
    *   清楚地说明当前任务如何与此先前的工作联系或在其基础上构建。

## 3. 任务分配

*   **参考实施计划：** 明确地将任务链接到 `Implementation_Plan.md`。示例：“此分配对应于实施计划中的`阶段 X，任务 Y，子组件 Z`。”
*   **目标：** 清楚地重申实施计划中说明的此任务或子组件的具体目标。
*   **详细的操作步骤（结合计划指导）：**
    *   列出实施代理需要执行的具体的、细粒度的操作。这些操作应*直接*基于 `Implementation_Plan.md` 中相关任务/子组件的嵌套项目符号。
    *   **至关重要的是，查找**与 `Implementation_Plan.md` 中这些操作步骤相关的任何“指导：”说明。这些说明突出了关键的方法、库、参数或方法。
    *   **您必须在给实施代理的详细说明中包含并扩展这些“指导：”说明。** 例如，如果计划中说：
        *   `- 实现用户评论的数据分词。`
            *   `指导：使用 DistilBERT 分词器 ('distilbert-base-uncased')。`
    *   那么您给实施代理的提示应为此提供完整、明确的说明，例如：
        *   `“您的具体操作是：`
            *   `为 'user_reviews' 文本列实现数据分词。您必须使用 DistilBERT 分词器，特别是用 'distilbert-base-uncased' 预训练模型初始化它。确保输出包括 'input_ids' 和 'attention_mask'。”`
    *   这确保了计划中的关键方法选择能被清楚地传达并为执行代理详细阐述。
*   **提供必要的上下文/资产：**
    *   包括完成任务所需的任何*额外*相关代码片段、文件路径、API 文档链接或数据结构定义，超出计划指导说明中的内容。
    *   指定操作步骤或计划指导中不明显的任何约束或要求。

## 4. 预期输出和可交付成果

*   **定义成功：** 清楚地描述什么构成任务的成功完成。
*   **指定可交付成果：** 列出预期的输出（例如，修改后的代码文件、创建的新文件、生成的特定数据、测试结果）。
*   **格式（如果适用）：** 指定输出所需的任何格式。

## 5. 内存库日志记录说明（强制性）

*   **说明：** “成功完成此任务后，您**必须**将您的工作全面记录到项目的`Memory_Bank.md`文件中。”
*   **格式遵守：** “严格遵守已建立的日志记录格式。确保您的日志包括：
    *   对实施计划中分配任务的引用。
    *   对所采取行动的清晰描述。
    *   生成或修改的任何代码片段。
    *   做出的任何关键决策或遇到的挑战。
    *   成功执行的确认（例如，测试通过，生成输出）。”
*   **注意：** *如果 APM 框架资产中存在专用的 `Memory_Bank_Log_Format.md` 文件，请在此处明确引用它。如果不可用，请强调基于以上各点进行详细、结构化日志记录的重要性。*

## 6. 澄清说明

*   **说明：** “如果此任务分配的任何部分不清楚，请在继续之前陈述您的具体问题。”

```

## 4. 最佳实践和适应性

*   **任务粒度：** 确保分配的任务与实施计划中定义的 manageable 工作块相对应。如果子组件看起来太大，请考虑建议用户在分配之前在计划中进一步分解它。
*   **上下文优于简洁：** 提供足够的上下文，即使这会使提示更长。缺少上下文是代理错误的主要原因。
*   **代码片段：** 有效地使用代码片段来指出需要修改或参考的特定区域。
*   **文件路径：** 始终提供清晰的、相对的（或绝对的，如果需要）相关文件路径。
*   **发送前审查：** 在脑海中审查提示：如果您是实施代理，您是否拥有开始所需的一切？
*   **复杂性扩展：** 对于非常简单的任务，您可以组合部分或使用更少的文字。对于高度复杂的任务，请确保超清晰并提供广泛的上下文，如有必要，在与用户协商后将其分解为更小的子提示。

### 确保遵守内存和日志记录标准

在向专业代理分配任务时，特别是那些涉及文件/目录创建或需要文档记录的实质性工作的任务，请明确提醒他们关于内存库和日志记录程序的义务：

*   **内存库结构：** “确保所有内存库目录和文件的创建都严格遵守 `02_Memory_Bank_Guide.md` 中详细说明的命名约定和结构指南。所有名称和结构都必须在创建**之前**与当前的 `Implementation_Plan.md` 进行验证。如果有任何歧义，请向经理代理咨询。”
*   **日志的简洁性和质量：** “所有日志条目都必须符合 `Memory_Bank_Log_Format.md`。强调需要简洁而信息丰富的摘要，重点关注关键行动、决策和结果。避免在日志本身中进行冗长的描述或不必要地包含大量代码/数据。”

应用这些指南为实施代理生成清晰、有上下文和可操作的任务分配提示，以促进高效和准确的项目执行。 